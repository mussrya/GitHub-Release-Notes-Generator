<div class="container-fluid">
    <div ng-if="errorMessage">
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon glyphicon-remove-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span> {{errorMessage}}
        </div>
    </div>
    <div class="row-fluid" ng-if="!errorMessage">
        <div class="col-sm-12">
            <div class="whiteBox">
                <div style="text-align:center;" ng-if="tokenSet != false && repoSet != false">
                    <button class="btn btn-default" ng-click="setDefaults(true)">Start Again</button>
                </div>
                <div ng-if="tokenSet == false">
                    <p>Enter your <a target="_blank" href="https://help.github.com/articles/creating-an-access-token-for-command-line-use/">GitHub personal authorization key and username then click the save button</a>.
                    </p>
                    <form name="signInForm">
                        <input required type="text" class="form-control" placeholder="Access token" aria-describedby="sizing-addon2" ng-model="token">
                        <br/>
                        <input required type="text" class="form-control" placeholder="GitHub Username" aria-describedby="sizing-addon2" ng-model="username">

                        <br/>
                        <input type="submit" ng-disabled="signInForm.$invalid" ng-click="saveTokenUser(token, username)" class="btn btn-default btn-save" value="Save"/>
                    </form>
                </div>
                <div ng-if="tokenSet == true && repoSet == false" ng-repeat="repo in repoData">
                    <div class="radio">
                        <label>
                            <input type="radio" name="optrepo" ng-model="repoName" ng-click="saveRepo(repo.full_name)"> {{repo.full_name}}</label>
                    </div>
                </div>
                <div ng-if="tokenSet == true && repoSet == true && milestoneName == false" ng-repeat="milestone in milestonesData">
                    <div class="radio">
                        <label>
                            <input type="radio" name="optmilestone" ng-model="milestoneName" ng-click="saveMilestone(milestone.title, milestone.number)"> {{milestone.title}}</label>
                    </div>
                </div>
                <div class="svgCenter dashboard" ng-if="!results && tokenSet == true && repoSet == true && !milestonesData || !results && tokenSet == true && !repoData && !milestonesData || !results && repoSet == true && !milestonesData">
                    <div class="dashboard" ng-include="'shared/loading/loading.html'"></div>
                </div>
                <div class="results" ng-if="results">
                    <h2>Release notes for: {{milestoneName}}</h2>
                    <h4>Issues closed off: {{results[0].milestone.closed_issues}}</h4>
                    <h4>Issues remaining open: {{results[0].milestone.open_issues}}</h4>
                    <br/>
                    <div ng-if="results[0].milestone.closed_issues > 0">
                        <h3>Issues closed:</h3>
                        <div class="divider"></div>
                        <div ng-repeat="result in results">
                            <div ng-if="result.state == 'closed'" class="result">
                                <div class="state state-closed">
                                    <span class="octicon octicon-issue-closed"></span> Closed
                                </div>
                                <a href="{{result.url| split}}">{{result.title}}</a>
                                <br/>
                                <div ng-if="result.body">
                                    <pre class="pre">{{result.body}}</pre>
                                    <br/>
                                </div>
                                <br/><span>Creator: <a href="{{result.user.html_url}}">{{result.user.login}}</a></span> | <span>Created on: {{result.created_at}}</span> | <span>Last updated: {{result.updated_at}}</span>
                                <br/>Labels:
                                <br/><span ng-repeat="label in result.labels"> <span class="btn btn-small" style="background-color:#{{label.color}};">{{label.name}}</span></span>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div ng-if="results[0].milestone.open_issues > 0">
                        <h3>Issues open:</h3>
                        <div class="divider"></div>
                        <div ng-repeat="result in results">
                            <div ng-if="result.state == 'open'" class="result">
                                <div class="state state-open">
                                    <span class="octicon octicon-issue-open"></span> Open
                                </div>
                                <a href="{{result.url| split}}">{{result.title}}</a>
                                <br/>
                                <div ng-if="result.body">
                                    <pre class="pre">{{result.body}}</pre>
                                    <br/>
                                </div>
                                <br/><span>Creator: <a href="{{result.user.html_url}}">{{result.user.login}}</a></span> | <span>Created on: {{result.created_at}}</span> | <span>Last updated: {{result.updated_at}}</span>
                                <br/>Labels:
                                <br/><span ng-repeat="label in result.labels"> <span class="btn btn-small" style="background-color:#{{label.color}};">{{label.name}}</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
