<div class="container-fluid">
    <div ng-if="errorMessage">
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon glyphicon-remove-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span> {{errorMessage}}
        </div>
    </div>
    <div class="row-fluid" ng-if="!errorMessage">
        <div class="col-sm-12">
            <div class="whiteBox">
                <div style="text-align:center;" ng-if="tokenSet != false && repoSet != false">
                    <button class="btn btn-default btn-start" ng-click="setDefaults(true)">Start Again</button>
                    <span ng-if="results">
                        <a href="javascript:window.print()"><button class="btn btn-default btn-print">Print</button></a>
                    </span>
                </div>
                <div ng-if="tokenSet == false">
                    <p>To get started, login with your GitHub account:</a>
                    </p>
                    <form name="signInForm">
                        <a class="btn btn-primary" href="https://github.com/login/oauth/authorize?client_id=fccd71711e22818e48c6?redirect_uri=http://gitread.io/#/auth/">Login to GitHub</a>
                    </form>
                </div>
                <div ng-if="tokenSet == true && repoSet == false && repoData">
                    <input type="text" ng-model="repoSearch" class="form-control" placeholder="search repos">
                    <div ng-repeat="repo in filteredRepoData = (repoData | filter:repoSearch)">
                        <div class="radio">
                            <label>
                                <input type="radio" name="optrepo" ng-model="repoName" ng-click="saveRepo(repo.full_name)"> {{repo.full_name}}</label>
                        </div>
                    </div>
                    <div ng-if="!filteredRepoData.length">
                        <br/>
                        <p>No results found</p>
                    </div>
                </div>
                <div ng-if="tokenSet == true && repoSet == true && milestoneName == false && milestonesData">
                    <br/>
                    <input type="text" ng-model="milestoneSearch" class="form-control" placeholder="search milestones">

                    <div ng-repeat="milestone in filteredMilestonesData = (milestonesData | filter:milestoneSearch) | orderBy:'state'">
                        <div class="radio">
                            <label>
                                <input type="radio" name="optmilestone" ng-model="milestoneName" ng-click="saveMilestone(milestone.title, milestone.number)"> {{milestone.title}} - (state: {{milestone.state}})</label>
                        </div>
                    </div>
                    <div ng-if="!filteredMilestonesData.length">
                        <br/>
                        <p>No results found</p>
                    </div>
                </div>
                <div class="svgCenter dashboard" ng-if="loading">
                    <div class="dashboard" ng-include="'shared/loading/loading.html'"></div>
                </div>
                <div class="results" ng-if="results">
                    <h2>Release notes for: {{milestoneName}}</h2>
                    <h4>Issues closed off: {{results[0].milestone.closed_issues}}</h4>
                    <h4>Issues remaining open: {{results[0].milestone.open_issues}}</h4>
                    <br/>
                    <div ng-if="results[0].milestone.closed_issues > 0">
                        <h3>Issues closed:</h3>
                        <div class="divider"></div>
                        <div ng-repeat="result in results">
                            <div ng-if="result.state == 'closed'" class="result">
                                <div class="state state-closed">
                                    <span class="octicon octicon-issue-closed"></span> Closed
                                </div>
                                <a href="{{result.url| split}}">{{result.title}}</a>
                                <br/>
                                <div ng-if="result.body">
                                    <pre class="pre">{{result.body}}</pre>
                                    <br/>
                                </div>
                                <br/><span>Creator: <a href="{{result.user.html_url}}">{{result.user.login}}</a></span> | <span>Created on: {{result.created_at}}</span> | <span>Last updated: {{result.updated_at}}</span>
                                <br/>Labels:
                                <br/><span ng-repeat="label in result.labels"> <span class="btn btn-small" style="box-shadow inset 0 0 0 1000px #{{label.color}}; background-color:#{{label.color}}; border: 12px solid #{{label.color}};">{{label.name}}</span></span>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div ng-if="results[0].milestone.open_issues > 0">
                        <h3>Issues open:</h3>
                        <div class="divider"></div>
                        <div ng-repeat="result in results">
                            <div ng-if="result.state == 'open'" class="result">
                                <div class="state state-open">
                                    <span class="octicon octicon-issue-open"></span> Open
                                </div>
                                <a href="{{result.url| split}}">{{result.title}}</a>
                                <br/>
                                <div ng-if="result.body">
                                    <pre class="pre">{{result.body}}</pre>
                                    <br/>
                                </div>
                                <br/><span>Creator: <a href="{{result.user.html_url}}">{{result.user.login}}</a></span> | <span>Created on: {{result.created_at}}</span> | <span>Last updated: {{result.updated_at}}</span>
                                <br/>Labels:
                                <br/><span ng-repeat="label in result.labels"> <span class="btn btn-small" style="box-shadow inset 0 0 0 1000px #{{label.color}}; background-color:#{{label.color}}; border: 12px solid #{{label.color}};">{{label.name}}</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
